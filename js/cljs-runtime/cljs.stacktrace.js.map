{"version":3,"file":"cljs.stacktrace.js","sources":["cljs/stacktrace.cljc"],"mappings":"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","names":["clojure.string/replace","clojure.string/blank?","frame-str","p__28830","map__28831","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","cljs.stacktrace/mapped-frame","cljs.core/vec","cljs.core.map.cljs$core$IFn$_invoke$arity$3","call-merge","function","clojure.string.split.cljs$core$IFn$_invoke$arity$2","st","repl-env","err","output-dir","opts","p1__28837#","cljs.core.map.cljs$core$IFn$_invoke$arity$2","cljs.core.dissoc.cljs$core$IFn$_invoke$arity$2","mapped-frames","f","idx","p__28736","p__28737","vec__28738","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","vec__28741","pre","post","x","i","file","clojure.string.join.cljs$core$IFn$_invoke$arity$2","cljs.stacktrace/parse-file","sb__4430__auto__","js/goog.string.StringBuffer","*print-newline*28843","cljs.core/*print-newline*","*print-fn*28844","cljs.core/*print-fn*","x__4431__auto__","vec__28730","vec__28733","xs","flc","G__28745","line","temp__5455__auto__","columns","source-map","var_args","G__28842","cljs.stacktrace/mapped-stacktrace-str","js/Error","parse-source-loc-info","col-part","p1__28768#","cljs.core.drop_while.cljs$core$IFn$_invoke$arity$2","cljs.stacktrace/starts-with?","cljs.stacktrace/chrome-st-el->frame","stacktrace","sms","and__3911__auto__","column","vec__28762","vec__28765","cljs.core/re-find","st-el","p1__28777#","cljs.stacktrace/parse-file-line-column","host","or__3922__auto__","host-port","port","clojure.string/trim","file'","no-source-file?","cljs.core/count","line-part","G__28744","cljs.core/not","munged-fn-name","cljs.core.range.cljs$core$IFn$_invoke$arity$3","cljs.core/vector","asset-root","cljs.core/-add-method","cljs.stacktrace/parse-stacktrace","cljs.stacktrace/string->regex","cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2","match","goog.string/endsWith","s0","s1","clojure.string/split-lines","cljs.core.remove.cljs$core$IFn$_invoke$arity$2","cljs.core/nil?","cljs.stacktrace.mapped_stacktrace_str.cljs$core$IFn$_invoke$arity$3","G__28746","cljs.stacktrace/parse-int","file-part","file&line","cljs.stacktrace/firefox-clean-function","p__28795","map__28796","vec__28820","vec__28823","parts","p1__28761#","p__28810","map__28811","vec__28771","vec__28774","unmunged-call-name","cljs.core/first","s","js/RegExp","file-side","cljs.stacktrace/ends-with?","cljs.core/second","p__28780","map__28781","cljs.core.merge_with.cljs$core$IFn$_invoke$arity$variadic","p1__28759#","line'","column'","call","adjust","get-best-column","default","cljs.stacktrace/firefox-st-el->frame","cljs.stacktrace.mapped_stacktrace.cljs$core$IFn$_invoke$arity$3","p1__28769#","cljs.core.take_while.cljs$core$IFn$_invoke$arity$2","goog.string/startsWith","cljs.core.subs.cljs$core$IFn$_invoke$arity$3","cljs.core/last","seq__28845","cljs.core/seq","chunk__28846","count__28847","i__28848","map__28849","temp__5457__auto__","cljs.core/chunked-seq?","c__4319__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","map__28851","cljs.core/next","process-frame","cljs.core/contains?","G__28826","cljs.core.symbol.cljs$core$IFn$_invoke$arity$1","cljs.stacktrace/remove-ext","vec__28789","vec__28792","line-fn-side","urlpat","G__28839","cljs.stacktrace/mapped-stacktrace","p1__28770#","cljs.stacktrace/safari-st-el->frame","cljs.core/munge","p1__28827#","cljs.core.filter.cljs$core$IFn$_invoke$arity$2","cljs.stacktrace/mapped-line-column-call","file-and-line","cljs.core.reduce.cljs$core$IFn$_invoke$arity$3","cljs.core/PersistentHashMap","cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2","js/parseInt","vec__28833","asset-path","cljs.core.conj.cljs$core$IFn$_invoke$arity$2","vec__28753","vec__28756","p1__28778#","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","p1__28779#","vec__28804","vec__28807","cljs.core.concat.cljs$core$IFn$_invoke$arity$2","cljs.core/rest","call->function","p1__28828#","p2__28829#","cljs.core/inc","cljs.core/identity","mapped","p1__28760#","method-table__4382__auto__","cljs.core.atom.cljs$core$IFn$_invoke$arity$1","prefer-table__4383__auto__","method-cache__4384__auto__","cached-hierarchy__4385__auto__","hierarchy__4386__auto__","cljs.core.get.cljs$core$IFn$_invoke$arity$3","cljs.core/get-global-hierarchy","cljs.core/MultiFn","cljs.core.symbol.cljs$core$IFn$_invoke$arity$2","cljs.stacktrace/output-directory","cljs.core.sort.cljs$core$IFn$_invoke$arity$1","cljs.core/keys","clojure.string/starts-with?","cljs.core/memoize","p1__28836#","cljs.core.println.cljs$core$IFn$_invoke$arity$variadic","p__28747","p__28748","map__28749","map__28750"],"sourcesContent":[";; Copyright (c) Rich Hickey. All rights reserved.\n;; The use and distribution terms for this software are covered by the\n;; Eclipse Public License 1.0 (http://opensource.org/licenses/eclipse-1.0.php)\n;; which can be found in the file epl-v10.html at the root of this distribution.\n;; By using this software in any fashion, you are agreeing to be bound by\n;; the terms of this license.\n;; You must not remove this notice, or any other, from this software.\n\n(ns cljs.stacktrace\n  (:require #?@(:clj  [[cljs.util :as util]\n                       [clojure.java.io :as io]]\n                :cljs [[goog.string :as gstring]])\n            [clojure.string :as string])\n  #?(:clj (:import [java.util.regex Pattern]\n                   [java.io File])))\n\n(defmulti parse-stacktrace\n  \"Parse a JavaScript stacktrace string into a canonical data form. The\n  arguments:\n\n  repl-env - the repl environment, an optional map with :host and :port keys\n             if the stacktrace includes url, not file references\n  st       - the original stacktrace string to parse\n  err      - an error map. :ua-product key defines the type of stacktrace parser\n             to use, for example :chrome\n  opts     - additional options. :output-dir maybe given in this argument if\n             :host and :port do not apply, for example, a file path\n\n  The canonical stacktrace representation can easily be mapped to a\n  ClojureScript one see mapped-stacktrace and mapped-stacktrace-str\"\n  (fn [repl-env st err opts] (:ua-product err)))\n\n(defn parse-int [s]\n  #?(:clj  (Long/parseLong s)\n     :cljs (js/parseInt s 10)))\n\n(defn starts-with?\n  #?(:cljs {:tag boolean})\n  [^String s0 s1]\n  #?(:clj  (.startsWith s0 s1)\n     :cljs (gstring/startsWith s0 s1)))\n\n(defn ends-with?\n  #?(:cljs {:tag boolean})\n  [^String s0 s1]\n  #?(:clj  (.endsWith s0 s1)\n     :cljs (gstring/endsWith s0 s1)))\n\n(defn string->regex [s]\n  #?(:clj  (Pattern/compile s)\n     :cljs (js/RegExp. s)))\n\n(defn output-directory [opts]\n  #?(:clj  (util/output-directory opts)\n     :cljs (or (:output-dir opts) \"out\")))\n\n(defmethod parse-stacktrace :default\n  [repl-env st err opts] st)\n\n(defn parse-file-line-column [flc]\n  (if-not (re-find #\":\" flc)\n    [flc nil nil]\n    (let [xs (string/split flc #\":\")\n          [pre [line column]]\n          (reduce\n            (fn [[pre post] [x i]]\n              (if (<= i 2)\n                [pre (conj post x)]\n                [(conj pre x) post]))\n            [[] []] (map vector xs (range (count xs) 0 -1)))\n          file (string/join \":\" pre)]\n      [(cond-> file\n         (starts-with? file \"(\") (string/replace \"(\" \"\"))\n       (parse-int\n         (cond-> line\n           (ends-with? line \")\") (string/replace \")\" \"\")))\n       (parse-int\n         (cond-> column\n           (ends-with? column \")\") (string/replace \")\" \"\")))])))\n\n(defn parse-file\n  \"Given a browser file url convert it into a relative path that can be used\n   to locate the original source.\"\n  [{:keys [host host-port port] :as repl-env} file {:keys [asset-path] :as opts}]\n  (let [urlpat (if host\n                 (string->regex\n                   (str \"http://\" host \":\" (or host-port port) \"/\"))\n                 \"\")\n        match  (if host\n                 (re-find urlpat file)\n                 (contains? opts :output-dir))]\n    (if match\n      (-> file\n        (string/replace urlpat \"\")\n        (string/replace\n          (string->regex\n            ;; if :asset-path specified drop leading slash\n            (str \"^\" (or (and asset-path (string/replace asset-path #\"^/\" \"\"))\n                         (output-directory opts)) \"/\"))\n          \"\"))\n      (if-let [asset-root (:asset-root opts)]\n        (string/replace file asset-root \"\")\n        (throw\n          (ex-info (str \"Could not relativize URL \" file)\n            {:type :parse-stacktrace\n             :reason :relativize-url}))))))\n\n;; -----------------------------------------------------------------------------\n;; Chrome Stacktrace\n\n(defn chrome-st-el->frame\n  [repl-env st-el opts]\n  (let [xs (-> st-el\n             (string/replace #\"\\s+at\\s+\" \"\")\n             (string/split #\"\\s+\"))\n        [function flc] (if (== 1 (count xs))\n                         [nil (first xs)]\n                         [(first xs) (last xs)])\n        [file line column] (parse-file-line-column flc)]\n    (if (and file function line column)\n      {:file (parse-file repl-env file opts)\n       :function (string/replace function #\"Object\\.\" \"\")\n       :line line\n       :column column}\n      (when-not (string/blank? function)\n        {:file nil\n         :function (string/replace function #\"Object\\.\" \"\")\n         :line nil\n         :column nil}))))\n\n(comment\n  (chrome-st-el->frame {:host \"localhost\" :port 9000}\n    \"\\tat cljs$core$ffirst (http://localhost:9000/out/cljs/core.js:5356:34)\" {})\n  )\n\n(defmethod parse-stacktrace :chrome\n  [repl-env st err opts]\n  (->> st\n    string/split-lines\n    (drop-while #(starts-with? % \"Error\"))\n    (take-while #(not (starts-with? % \"    at eval\")))\n    (map #(chrome-st-el->frame repl-env % opts))\n    (remove nil?)\n    vec))\n\n(comment\n  (parse-stacktrace {:host \"localhost\" :port 9000}\n    \"Error: 1 is not ISeqable\n    at Object.cljs$core$seq [as seq] (http://localhost:9000/out/cljs/core.js:4258:8)\n    at Object.cljs$core$first [as first] (http://localhost:9000/out/cljs/core.js:4288:19)\n    at cljs$core$ffirst (http://localhost:9000/out/cljs/core.js:5356:34)\n    at http://localhost:9000/out/cljs/core.js:16971:89\n    at cljs.core.map.cljs$core$map__2 (http://localhost:9000/out/cljs/core.js:16972:3)\n    at http://localhost:9000/out/cljs/core.js:10981:129\n    at cljs.core.LazySeq.sval (http://localhost:9000/out/cljs/core.js:10982:3)\n    at cljs.core.LazySeq.cljs$core$ISeqable$_seq$arity$1 (http://localhost:9000/out/cljs/core.js:11073:10)\n    at Object.cljs$core$seq [as seq] (http://localhost:9000/out/cljs/core.js:4239:13)\n    at Object.cljs$core$pr_sequential_writer [as pr_sequential_writer] (http://localhost:9000/out/cljs/core.js:28706:14)\"\n    {:ua-product :chrome}\n    nil)\n\n  (parse-stacktrace {:host \"localhost\" :port 9000}\n    \"Error: 1 is not ISeqable\n    at Object.cljs$core$seq [as seq] (http://localhost:9000/js/cljs/core.js:4258:8)\n    at Object.cljs$core$first [as first] (http://localhost:9000/js/cljs/core.js:4288:19)\n    at cljs$core$ffirst (http://localhost:9000/js/cljs/core.js:5356:34)\n    at http://localhost:9000/js/cljs/core.js:16971:89\n    at cljs.core.map.cljs$core$map__2 (http://localhost:9000/js/cljs/core.js:16972:3)\n    at http://localhost:9000/js/cljs/core.js:10981:129\n    at cljs.core.LazySeq.sval (http://localhost:9000/js/cljs/core.js:10982:3)\n    at cljs.core.LazySeq.cljs$core$ISeqable$_seq$arity$1 (http://localhost:9000/js/cljs/core.js:11073:10)\n    at Object.cljs$core$seq [as seq] (http://localhost:9000/js/cljs/core.js:4239:13)\n    at Object.cljs$core$pr_sequential_writer [as pr_sequential_writer] (http://localhost:9000/js/cljs/core.js:28706:14)\"\n    {:ua-product :chrome}\n    {:asset-path \"/js\"})\n\n  (parse-stacktrace {:host \"localhost\" :port 9000}\n    \"Error: 1 is not ISeqable\n    at Object.cljs$core$seq [as seq] (http://localhost:9000/out/cljs/core.js:4259:8)\n    at Object.cljs$core$first [as first] (http://localhost:9000/out/cljs/core.js:4289:19)\n    at cljs$core$ffirst (http://localhost:9000/out/cljs/core.js:5357:18)\n    at eval (eval at <anonymous> (http://localhost:9000/out/clojure/browser/repl.js:23:272), <anonymous>:1:106)\n    at eval (eval at <anonymous> (http://localhost:9000/out/clojure/browser/repl.js:23:272), <anonymous>:9:3)\n    at eval (eval at <anonymous> (http://localhost:9000/out/clojure/browser/repl.js:23:272), <anonymous>:14:4)\n    at http://localhost:9000/out/clojure/browser/repl.js:23:267\n    at clojure$browser$repl$evaluate_javascript (http://localhost:9000/out/clojure/browser/repl.js:26:4)\n    at Object.callback (http://localhost:9000/out/clojure/browser/repl.js:121:169)\n    at goog.messaging.AbstractChannel.deliver (http://localhost:9000/out/goog/messaging/abstractchannel.js:142:13)\"\n    {:ua-product :chrome}\n    nil)\n\n  ;; Node.js example\n  (parse-stacktrace {}\n    \"Error: 1 is not ISeqable\n    at Object.cljs$core$seq [as seq] (/home/my/cool/project/.cljs_bootstrap/cljs/core.js:3999:8)\n    at Object.cljs$core$first [as first] (/home/my/cool/project/.cljs_bootstrap/cljs/core.js:4018:19)\n    at cljs$core$ffirst (/home/my/cool/project/.cljs_bootstrap/cljs/core.js:5161:34)\n    at /home/my/cool/project/.cljs_bootstrap/cljs/core.js:16006:88\n    at cljs.core.map.cljs$core$IFn$_invoke$arity$2 (/home/my/cool/project/.cljs_bootstrap/cljs/core.js:16007:3)\n    at cljs.core.LazySeq.sval (/home/my/cool/project/.cljs_bootstrap/cljs/core.js:10244:109)\n    at cljs.core.LazySeq.cljs$core$ISeqable$_seq$arity$1 (/home/my/cool/project/.cljs_bootstrap/cljs/core.js:10335:10)\n    at Object.cljs$core$seq [as seq] (/home/my/cool/project/.cljs_bootstrap/cljs/core.js:3980:13)\n    at Object.cljs$core$pr_sequential_writer [as pr_sequential_writer] (/home/my/cool/project/.cljs_bootstrap/cljs/core.js:28084:14)\n    at cljs.core.LazySeq.cljs$core$IPrintWithWriter$_pr_writer$arity$3 (/home/my/cool/project/.cljs_bootstrap/cljs/core.js:28812:18)\"\n    {:ua-product :chrome}\n    {:output-dir \"/home/my/cool/project/.cljs_bootstrap\"})\n  )\n\n;; -----------------------------------------------------------------------------\n;; Safari Stacktrace\n\n(defn safari-st-el->frame\n  [repl-env st-el opts]\n  (let [[function flc] (if (re-find #\"@\" st-el)\n                         (string/split st-el #\"@\")\n                         [nil st-el])\n        [file line column] (parse-file-line-column flc)]\n    (if (and file function line column)\n      {:file (parse-file repl-env file opts)\n       :function (string/trim function)\n       :line line\n       :column column}\n      (when-not (string/blank? function)\n        {:file nil\n         :function (string/trim function)\n         :line nil\n         :column nil}))))\n\n(comment\n  (safari-st-el->frame {:host \"localhost\" :port 9000}\n    \"cljs$core$seq@http://localhost:9000/out/cljs/core.js:4259:17\" {})\n\n  (safari-st-el->frame {:host \"localhost\" :port 9000}\n    \"cljs$core$seq@http://localhost:9000/js/cljs/core.js:4259:17\" {:asset-path \"js\"})\n  )\n\n(defmethod parse-stacktrace :safari\n  [repl-env st err opts]\n  (->> st\n    string/split-lines\n    (drop-while #(starts-with? % \"Error\"))\n    (take-while #(not (starts-with? % \"eval code\")))\n    (remove string/blank?)\n    (map #(safari-st-el->frame repl-env % opts))\n    (remove nil?)\n    vec))\n\n(comment\n  (parse-stacktrace {}\n    \"cljs$core$seq@out/cljs/core.js:3999:17\n    cljs$core$first@out/cljs/core.js:4018:22\n    cljs$core$ffirst@out/cljs/core.js:5161:39\n    global code\"\n    {:ua-product :safari}\n    {:output-dir \"out\"})\n\n  (parse-stacktrace {:host \"localhost\" :port 9000}\n    \"cljs$core$seq@http://localhost:9000/out/cljs/core.js:4259:17\ncljs$core$first@http://localhost:9000/out/cljs/core.js:4289:22\ncljs$core$ffirst@http://localhost:9000/out/cljs/core.js:5357:39\nhttp://localhost:9000/out/cljs/core.js:16972:92\nhttp://localhost:9000/out/cljs/core.js:16973:3\nhttp://localhost:9000/out/cljs/core.js:10982:133\nsval@http://localhost:9000/out/cljs/core.js:10983:3\ncljs$core$ISeqable$_seq$arity$1@http://localhost:9000/out/cljs/core.js:11074:14\ncljs$core$seq@http://localhost:9000/out/cljs/core.js:4240:44\ncljs$core$pr_sequential_writer@http://localhost:9000/out/cljs/core.js:28707:17\ncljs$core$IPrintWithWriter$_pr_writer$arity$3@http://localhost:9000/out/cljs/core.js:29386:38\ncljs$core$pr_writer_impl@http://localhost:9000/out/cljs/core.js:28912:57\ncljs$core$pr_writer@http://localhost:9000/out/cljs/core.js:29011:32\ncljs$core$pr_seq_writer@http://localhost:9000/out/cljs/core.js:29015:20\ncljs$core$pr_sb_with_opts@http://localhost:9000/out/cljs/core.js:29078:24\ncljs$core$pr_str_with_opts@http://localhost:9000/out/cljs/core.js:29092:48\ncljs$core$pr_str__delegate@http://localhost:9000/out/cljs/core.js:29130:34\ncljs$core$pr_str@http://localhost:9000/out/cljs/core.js:29139:39\neval code\neval@[native code]\nhttp://localhost:9000/out/clojure/browser/repl.js:23:271\nclojure$browser$repl$evaluate_javascript@http://localhost:9000/out/clojure/browser/repl.js:26:4\nhttp://localhost:9000/out/clojure/browser/repl.js:121:173\ndeliver@http://localhost:9000/out/goog/messaging/abstractchannel.js:142:21\nxpcDeliver@http://localhost:9000/out/goog/net/xpc/crosspagechannel.js:733:19\nmessageReceived_@http://localhost:9000/out/goog/net/xpc/nativemessagingtransport.js:321:23\nfireListener@http://localhost:9000/out/goog/events/events.js:741:25\nhandleBrowserEvent_@http://localhost:9000/out/goog/events/events.js:862:34\nhttp://localhost:9000/out/goog/events/events.js:276:42\"\n    {:ua-product :safari}\n    nil)\n  )\n\n;; -----------------------------------------------------------------------------\n;; Firefox Stacktrace\n\n(defn firefox-clean-function [f]\n  (as-> f f\n    (cond\n      (string/blank? f) nil\n      (not= (.indexOf f \"</\") -1)\n      (let [idx (.indexOf f \"</\")]\n        (.substring f (+ idx 2)))\n      :else f)\n    (-> f\n      (string/replace #\"<\" \"\")\n      (string/replace #?(:clj #\"\\/\" :cljs (js/RegExp. \"\\\\/\")) \"\"))))\n\n(defn firefox-st-el->frame\n  [repl-env st-el opts]\n  (let [[function flc] (if (re-find #\"@\" st-el)\n                         (string/split st-el #\"@\")\n                         [nil st-el])\n        [file line column] (parse-file-line-column flc)]\n    (if (and file function line column)\n      {:file (parse-file repl-env file opts)\n       :function (firefox-clean-function function)\n       :line line\n       :column column}\n      (when-not (string/blank? function)\n        {:file nil\n         :function (firefox-clean-function function)\n         :line nil\n         :column nil}))))\n\n(comment\n  (firefox-st-el->frame {:host \"localhost\" :port 9000}\n    \"cljs$core$seq@http://localhost:9000/out/cljs/core.js:4258:8\" {})\n\n  (firefox-st-el->frame {:host \"localhost\" :port 9000}\n    \"cljs.core.map</cljs$core$map__2/</<@http://localhost:9000/out/cljs/core.js:16971:87\" {})\n\n  (firefox-st-el->frame {:host \"localhost\" :port 9000}\n    \"cljs.core.map</cljs$core$map__2/</<@http://localhost:9000/out/cljs/core.js:16971:87\" {})\n\n  (firefox-st-el->frame {:host \"localhost\" :port 9000}\n    \"cljs.core.pr_str</cljs$core$pr_str@http://localhost:9000/out/cljs/core.js:29138:8\" {})\n\n  (firefox-st-el->frame {:host \"localhost\" :port 9000}\n    \"cljs.core.pr_str</cljs$core$pr_str__delegate@http://localhost:9000/out/cljs/core.js:29129:8\" {})\n  )\n\n(defmethod parse-stacktrace :firefox\n  [repl-env st err opts]\n  (->> st\n    string/split-lines\n    (drop-while #(starts-with? % \"Error\"))\n    (take-while #(= (.indexOf % \"> eval\") -1))\n    (remove string/blank?)\n    (map #(firefox-st-el->frame repl-env % opts))\n    (remove nil?)\n    vec))\n\n(comment\n  (parse-stacktrace {:host \"localhost\" :port 9000}\n    \"cljs$core$seq@http://localhost:9000/out/cljs/core.js:4258:8\ncljs$core$first@http://localhost:9000/out/cljs/core.js:4288:9\ncljs$core$ffirst@http://localhost:9000/out/cljs/core.js:5356:24\ncljs.core.map</cljs$core$map__2/</<@http://localhost:9000/out/cljs/core.js:16971:87\ncljs.core.map</cljs$core$map__2/<@http://localhost:9000/out/cljs/core.js:16970:1\ncljs.core.LazySeq.prototype.sval/self__.s<@http://localhost:9000/out/cljs/core.js:10981:119\ncljs.core.LazySeq.prototype.sval@http://localhost:9000/out/cljs/core.js:10981:13\ncljs.core.LazySeq.prototype.cljs$core$ISeqable$_seq$arity$1@http://localhost:9000/out/cljs/core.js:11073:1\ncljs$core$seq@http://localhost:9000/out/cljs/core.js:4239:8\ncljs$core$pr_sequential_writer@http://localhost:9000/out/cljs/core.js:28706:4\ncljs.core.LazySeq.prototype.cljs$core$IPrintWithWriter$_pr_writer$arity$3@http://localhost:9000/out/cljs/core.js:29385:8\ncljs$core$pr_writer_impl@http://localhost:9000/out/cljs/core.js:28911:8\ncljs$core$pr_writer@http://localhost:9000/out/cljs/core.js:29010:8\ncljs$core$pr_seq_writer@http://localhost:9000/out/cljs/core.js:29014:1\ncljs$core$pr_sb_with_opts@http://localhost:9000/out/cljs/core.js:29077:1\ncljs$core$pr_str_with_opts@http://localhost:9000/out/cljs/core.js:29091:23\ncljs.core.pr_str</cljs$core$pr_str__delegate@http://localhost:9000/out/cljs/core.js:29129:8\ncljs.core.pr_str</cljs$core$pr_str@http://localhost:9000/out/cljs/core.js:29138:8\n@http://localhost:9000/out/clojure/browser/repl.js line 23 > eval:1:25\n@http://localhost:9000/out/clojure/browser/repl.js line 23 > eval:1:2\nclojure$browser$repl$evaluate_javascript/result<@http://localhost:9000/out/clojure/browser/repl.js:23:267\nclojure$browser$repl$evaluate_javascript@http://localhost:9000/out/clojure/browser/repl.js:23:15\nclojure$browser$repl$connect/</<@http://localhost:9000/out/clojure/browser/repl.js:121:128\ngoog.messaging.AbstractChannel.prototype.deliver@http://localhost:9000/out/goog/messaging/abstractchannel.js:142:5\ngoog.net.xpc.CrossPageChannel.prototype.xpcDeliver@http://localhost:9000/out/goog/net/xpc/crosspagechannel.js:733:7\ngoog.net.xpc.NativeMessagingTransport.messageReceived_@http://localhost:9000/out/goog/net/xpc/nativemessagingtransport.js:321:1\ngoog.events.fireListener@http://localhost:9000/out/goog/events/events.js:741:10\ngoog.events.handleBrowserEvent_@http://localhost:9000/out/goog/events/events.js:862:1\ngoog.events.getProxy/f<@http://localhost:9000/out/goog/events/events.js:276:16\"\n    {:ua-product :firefox}\n    nil)\n  )\n\n;; -----------------------------------------------------------------------------\n;; Rhino Stacktrace\n\n(defmethod parse-stacktrace :rhino\n  [repl-env st err {:keys [output-dir] :as opts}]\n  (letfn [(process-frame [frame-str]\n            (when-not (or (string/blank? frame-str)\n                          (== -1 (.indexOf frame-str \"\\tat\")))\n              (let [[file-side line-fn-side] (string/split frame-str #\":\")\n                   file                      (string/replace file-side #\"\\s+at\\s+\" \"\")\n                   [line function]           (string/split line-fn-side #\"\\s+\")]\n               {:file     (string/replace file\n                            (str output-dir\n                              #?(:clj File/separator :cljs \"/\"))\n                            \"\")\n                :function (when function\n                            (-> function\n                              (string/replace \"(\" \"\")\n                              (string/replace \")\" \"\")))\n                :line     (when (and line (not (string/blank? line)))\n                            (parse-int line))\n                :column   0})))]\n    (->> (string/split st #\"\\n\")\n      (map process-frame)\n      (remove nil?)\n      vec)))\n\n(comment\n  (parse-stacktrace {}\n    \"\\tat .cljs_rhino_repl/goog/../cljs/core.js:4215 (seq)\n     \\tat .cljs_rhino_repl/goog/../cljs/core.js:4245 (first)\n     \\tat .cljs_rhino_repl/goog/../cljs/core.js:5295 (ffirst)\n     \\tat <cljs repl>:1\n     \\tat <cljs repl>:1\"\n    {:ua-product :rhino}\n    {:output-dir \".cljs_rhino_repl\"})\n\n  (parse-stacktrace {}\n    \"org.mozilla.javascript.JavaScriptException: Error: 1 is not ISeqable (.cljs_rhino_repl/goog/../cljs/core.js#3998)\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:3998 (cljs$core$seq)\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:4017 (cljs$core$first)\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:5160 (cljs$core$ffirst)\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:16005\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:16004\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:10243\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:10334\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:3979 (cljs$core$seq)\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:28083 (cljs$core$pr_sequential_writer)\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:28811\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:28267 (cljs$core$pr_writer_impl)\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:28349 (cljs$core$pr_writer)\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:28353 (cljs$core$pr_seq_writer)\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:28416 (cljs$core$pr_sb_with_opts)\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:28430 (cljs$core$pr_str_with_opts)\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:28524\n   \\tat .cljs_rhino_repl/goog/../cljs/core.js:28520 (cljs$core$pr_str)\n   at <cljs repl>:1\n   \"\n    {:ua-product :rhino}\n    {:output-dir \".cljs_rhino_repl\"})\n  )\n\n;; -----------------------------------------------------------------------------\n;; Nashorn Stacktrace\n\n(defmethod parse-stacktrace :nashorn\n  [repl-env st err {:keys [output-dir] :as opts}]\n  (letfn [(process-frame [frame-str]\n            (when-not (or (string/blank? frame-str)\n                          (== -1 (.indexOf frame-str \"\\tat\")))\n              (let [frame-str               (string/replace frame-str #\"\\s+at\\s+\" \"\")\n                    [function file-and-line] (string/split frame-str #\"\\s+\")\n                    [file-part line-part]    (string/split file-and-line #\":\")]\n                {:file     (string/replace (.substring file-part 1)\n                             (str output-dir\n                               #?(:clj File/separator :cljs \"/\"))\n                             \"\")\n                 :function function\n                 :line     (when (and line-part (not (string/blank? line-part)))\n                             (parse-int\n                               (.substring line-part 0\n                                 (dec (count line-part)))))\n                 :column   0})))]\n    (->> (string/split st #\"\\n\")\n      (map process-frame)\n      (remove nil?)\n      vec)))\n\n(comment\n  (parse-stacktrace {}\n    \"Error: 1 is not ISeqable\n    \\tat cljs$core$seq (.cljs_nashorn_repl/goog/../cljs/core.js:3998)\n    \\tat cljs$core$first (.cljs_nashorn_repl/goog/../cljs/core.js:4017)\n    \\tat cljs$core$ffirst (.cljs_nashorn_repl/goog/../cljs/core.js:5160)\n    \\tat <anonymous> (.cljs_nashorn_repl/goog/../cljs/core.js:16005)\n    \\tat <anonymous> (.cljs_nashorn_repl/goog/../cljs/core.js:16004)\n    \\tat sval (.cljs_nashorn_repl/goog/../cljs/core.js:10243)\n    \\tat cljs$core$ISeqable$_seq$arity$1-6 (.cljs_nashorn_repl/goog/../cljs/core.js:10334)\n    \\tat cljs$core$seq (.cljs_nashorn_repl/goog/../cljs/core.js:3979)\n    \\tat cljs$core$pr_sequential_writer (.cljs_nashorn_repl/goog/../cljs/core.js:28083)\n    \\tat cljs$core$IPrintWithWriter$_pr_writer$arity$3-5 (.cljs_nashorn_repl/goog/../cljs/core.js:28811)\n    \\tat cljs$core$pr_writer_impl (.cljs_nashorn_repl/goog/../cljs/core.js:28267)\n    \\tat cljs$core$pr_writer (.cljs_nashorn_repl/goog/../cljs/core.js:28349)\n    \\tat cljs$core$pr_seq_writer (.cljs_nashorn_repl/goog/../cljs/core.js:28353)\n    \\tat cljs$core$pr_sb_with_opts (.cljs_nashorn_repl/goog/../cljs/core.js:28416)\n    \\tat cljs$core$pr_str_with_opts (.cljs_nashorn_repl/goog/../cljs/core.js:28430)\n    \\tat cljs$core$IFn$_invoke$arity$variadic-71 (.cljs_nashorn_repl/goog/../cljs/core.js:28524)\n    \\tat cljs$core$pr_str (.cljs_nashorn_repl/goog/../cljs/core.js:28520)\n    \\tat <anonymous> (<eval>:1)\n    \\tat <program> (<eval>:1)\\n\"\n    {:ua-product :nashorn}\n    {:output-dir \".cljs_nashorn_repl\"})\n  )\n\n;; -----------------------------------------------------------------------------\n;; Node.js Stacktrace\n\n(defmethod parse-stacktrace :nodejs\n  [repl-env st err {:keys [output-dir] :as opts}]\n  (letfn [(parse-source-loc-info [x]\n            (when (and x (not (string/blank? x)))\n              (parse-int x)))\n          (process-frame [frame-str]\n            (when-not (or (string/blank? frame-str)\n                          (nil? (re-find #\"^\\s+at\" frame-str)))\n              (let [frame-str (string/replace frame-str #\"\\s+at\\s+\" \"\")]\n                (when-not (string/starts-with? frame-str \"repl:\")\n                  (let [parts (string/split frame-str #\"\\s+\")\n                        [function file&line] (if (== 2 (count parts))\n                                                   [(first parts)\n                                                    (subs (second parts) 1\n                                                      (dec (count (second parts))))]\n                                                   [nil (first parts)])\n                        [file-part line-part col-part] (string/split file&line #\":\")]\n                    {:file     (if function\n                                 (cond-> file-part\n                                   output-dir\n                                   (string/replace\n                                     (str output-dir\n                                       #?(:clj File/separator :cljs \"/\"))\n                                     \"\"))\n                                 file-part)\n                     :function function\n                     :line     (parse-source-loc-info line-part)\n                     :column   (parse-source-loc-info col-part)})))))]\n    (->> (string/split st #\"\\n\")\n      (map process-frame)\n      (remove nil?)\n      vec)))\n\n(comment\n  (parse-stacktrace {}\n    \"Error: 1 is not ISeqable\n    at cljs$core$seq (.cljs_node_repl/cljs/core.cljs:1118:20)\n    at repl:1:65\n    at repl:9:4\n    at repl:17:3\n    at repl:22:4\n    at Object.exports.runInThisContext (vm.js:54:17)\n    at Domain.<anonymous> ([stdin]:41:34)\n    at Domain.run (domain.js:228:14)\n    at Socket.<anonymous> ([stdin]:40:25)\n    at emitOne (events.js:77:13)\"\n\n    {:ua-product :nodejs}\n    {:output-dir \".cljs_node_repl\"})\n  )\n\n;; -----------------------------------------------------------------------------\n;; Stacktrace Mapping\n\n(defn remove-ext [file]\n  (-> file\n    (string/replace #\"\\.js$\" \"\")\n    (string/replace #\"\\.cljs$\" \"\")\n    (string/replace #\"\\.cljc$\" \"\")\n    (string/replace #\"\\.clj$\" \"\")))\n\n(defn mapped-line-column-call\n  \"Given a cljs.source-map source map data structure map a generated line\n   and column back to the original line, column, and function called.\"\n  [sms file line column]\n  (let [source-map (get sms (symbol (string/replace (remove-ext file) \"/\" \".\")))]\n    ;; source maps are 0 indexed for columns\n    ;; multiple segments may exist at column\n    ;; the last segment seems most accurate\n    (letfn [(get-best-column [columns column]\n             (last (or (get columns\n                         (last (filter #(<= % (dec column))\n                                 (sort (keys columns)))))\n                     (second (first columns)))))\n           (adjust [mapped]\n             (vec (map #(%1 %2) [inc inc identity] mapped)))]\n     (let [default [line column nil]]\n       ;; source maps are 0 indexed for lines\n       (if-let [columns (get source-map (dec line))]\n         (adjust (map (get-best-column columns column) [:line :col :name]))\n         default)))))\n\n(defn mapped-frame\n  \"Given opts and a canonicalized JavaScript stacktrace frame, return the\n  ClojureScript frame.\"\n  [{:keys [function file line column]} sms opts]\n  (let [no-source-file?      (if-not file true (starts-with? file \"<\"))\n        [line' column' call] (if no-source-file?\n                               [line column nil]\n                               (mapped-line-column-call sms file line column))\n        file'                (when-not no-source-file?\n                               (if (ends-with? file \".js\")\n                                 (str (subs file 0 (- (count file) 3)) \".cljs\")\n                                 file))]\n    {:function function\n     :call     call\n     :file     (if no-source-file?\n                 (str \"NO_SOURCE_FILE\" (when file (str \" \" file)))\n                 file')\n     :line     line'\n     :column   column'}))\n\n(defn mapped-stacktrace\n  \"Given a vector representing the canonicalized JavaScript stacktrace\n   return the ClojureScript stacktrace. The canonical stacktrace must be\n   in the form:\n\n    [{:file <string>\n      :function <string>\n      :line <integer>\n      :column <integer>}*]\n\n   :file must be a URL path (without protocol) relative to :output-dir or a\n   identifier delimited by angle brackets. The returned mapped stacktrace will\n   also contain :url entries to the original sources if it can be determined\n   from the classpath.\"\n  ([stacktrace sms]\n   (mapped-stacktrace stacktrace sms nil))\n  ([stacktrace sms opts]\n   (letfn [(call->function [x]\n             (if (:call x)\n               (hash-map :function (:call x))\n               {}))\n           (call-merge [function call]\n             (merge-with\n               (fn [munged-fn-name unmunged-call-name]\n                 (if (= munged-fn-name\n                        (string/replace (munge unmunged-call-name) \".\" \"$\"))\n                   unmunged-call-name\n                   munged-fn-name))\n               function call))]\n     (let [mapped-frames (map (memoize #(mapped-frame % sms opts)) stacktrace)]\n       ;; take each non-nil :call and optionally merge it into :function one-level\n       ;; up to avoid replacing with local symbols, we only replace munged name if\n       ;; we can munge call symbol back to it\n       (vec (map call-merge\n              (map #(dissoc % :call) mapped-frames)\n              (concat (rest (map call->function mapped-frames)) [{}])))))))\n\n(defn mapped-stacktrace-str\n  \"Given a vector representing the canonicalized JavaScript stacktrace and a map\n  of library names to decoded source maps, print the ClojureScript stacktrace .\n  See mapped-stacktrace.\"\n  ([stacktrace sms]\n   (mapped-stacktrace-str stacktrace sms nil))\n  ([stacktrace sms opts]\n   (with-out-str\n     (doseq [{:keys [function file line column]}\n             (mapped-stacktrace stacktrace sms opts)]\n       (println \"\\t\"\n         (str (when function (str function \" \"))\n              \"(\" file (when line (str \":\" line))\n                       (when column (str \":\" column)) \")\"))))))\n\n(comment\n  (require '[cljs.closure :as cljsc]\n           '[clojure.data.json :as json]\n           '[cljs.source-map :as sm]\n           '[clojure.pprint :as pp])\n\n  (cljsc/build \"samples/hello/src\"\n    {:optimizations :none\n     :output-dir \"samples/hello/out\"\n     :output-to \"samples/hello/out/hello.js\"\n     :source-map true})\n\n  (def sms\n    {'hello.core\n     (sm/decode\n       (json/read-str\n         (slurp \"samples/hello/out/hello/core.js.map\")\n         :key-fn keyword))})\n\n  (pp/pprint sms)\n\n  ;; maps to :line 5 :column 24\n  (mapped-stacktrace\n    [{:file \"hello/core.js\"\n      :function \"first\"\n      :line 6\n      :column 0}]\n    sms {:output-dir \"samples/hello/out\"})\n\n  (mapped-stacktrace-str\n    [{:file \"hello/core.js\"\n      :function \"first\"\n      :line 6\n      :column 0}]\n    sms {:output-dir \"samples/hello/out\"})\n  )\n"]}